"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[118],{2118:(t,e,n)=>{n.r(e),n.d(e,{default:()=>a});function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var o,s,i=[],a=!0,r=!1;try{for(n=n.call(t);!(a=(o=n.next()).done)&&(i.push(o.value),!e||i.length!==e);a=!0);}catch(t){r=!0,s=t}finally{try{a||null==n.return||n.return()}finally{if(r)throw s}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}const i={name:"insights",data:function(){return{loading:!1,reload:!0,msg:{errors:window.nerrors,success:window.nsuccess,warnings:window.nwarnings,infos:window.ninfos,footercontent:window.nfooterContent},channels:[],selectedChannel:null,period:"30DAYS",channelInsights:{}}},created:function(){document.title="Nuelink - Insights",this.getChannels()},computed:{},methods:{getInsights:function(){var t=this;this.loading=!0,axios.post("/api/channels/".concat(this.selectedChannel,"/insights"),{period:this.period}).then((function(e){t.channelInsights=null==e?void 0:e.data,t.loading=!1})).catch((function(e){t.loading=!1,notyMsg({text:"something went wrong we could not get page insights. Please try again.",type:"error"})}))},getChannels:function(){var t=this;this.loading=!0,axios.get("/api/channels").then((function(e){var n,o;t.loading=!1,t.channels=null==e||null===(n=e.data)||void 0===n?void 0:n.data,t.selectedChannel=(null===(o=t.channels[0])||void 0===o?void 0:o.id)||null})).catch((function(e){t.loading=!1,t.getChannels()}))},channelThumbnail:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return t&&t?t.thumbnail&&-1!=t.thumbnail.indexOf("http")?t.thumbnail:"/media/"+t.thumbnail:""},groupBy:function(t,e){var n=new Map;return t.forEach((function(t){var o=e(t),s=n.get(o);s?s.push(t):n.set(o,[t])})),Array.from(n.values())},getRemotePosts:function(){var t=this,e=this;this.loading=!0,this.reload=!1;var n="/api/remotePosts",s=new URL(window.location.href),i=s&&s.searchParams.get("page")?s.searchParams.get("page"):1;n="".concat(n,"?page=").concat(i,"&").concat(""),axios.get(n).then((function(n){t.remotePosts=n.data.data;for(var s=0,i=Object.entries(n.data.meta);s<i.length;s++){var a=o(i[s],2),r=a[0],l=a[1];e.pagination[r]=l}try{t.remotePosts&&t.remotePosts.length>0?(e.reload=!0,setTimeout((function(){e.loading=!1,initList()}),300)):(e.loading=!1,e.reload=!0)}catch(t){notyMsg({text:"Something went wrong, Please reload the page or contact the support.",type:"warning"})}try{$('[data-toggle="tooltip"]').tooltip()}catch(t){setTimeout((function(){$('[data-toggle="tooltip"]').tooltip()}),1e3)}})).catch((function(t){e.getRemotePosts()}))},getCollections:function(){var t=this;axios.get("/api/collections").then((function(e){t.collections=e.data.data;var n=t.posts.filter((function(t){return"PENDING"===t.status}));n.forEach((function(e,o){n[o].collection=t.collections.find((function(t){return t.id==n[o].collectionId}))}))})).catch((function(t){}))},refreshAllInsights:function(){var t=this;this.loading=!0,axios.post("/api/remotePosts/refreshAll").then((function(e){t.loading=!1,notyMsg({text:"All posts insights was refreshed successfully!",type:"success"}),$(".list-alert").removeClass("show"),setTimeout((function(){window.location.href=window.location.href}),300)})).catch((function(e){t.loading=!1,notyMsg({text:"Something went wrong! We could not refresh all insights. Please try again.",type:"error"})}))},refreshStats:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.loading=!0,axios.get("/api/remotePosts/refresh/"+t).then((function(t){e.loading=!1,n&&(notyMsg({text:"The post reach statistics was refreshed successfully!",type:"success"}),$(".list-alert").removeClass("show"),setTimeout((function(){window.location.href=window.location.href}),300))})).catch((function(t){e.loading=!1,notyMsg({text:"Something went wrong! We could not refresh the reach statistics of this post. Please try again.",type:"error"})}))},refreshStatsMultiplePosts:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=this;t=[],window.checkedList=window.checkedList?window.checkedList:[],window.checkedList.forEach((function(e){return t.push(e.value)})),t.forEach((function(n,o){e.refreshStats(n,o>=t.length-1)}))},deletePost:function(t){var e=this,n=notyDialog({text:"Are you sure you want to delete this post?",buttons:[Noty.button("Yes, Delete","btn btn-danger",(function(){axios.delete("/api/remotePosts/"+t).then((function(t){e.getRemotePosts(),n.close(),notyMsg({text:"Post was deleted successfully!",type:"success"})})).catch((function(t){notyMsg({text:"Something went wrong! we could not delete this post.",type:"error"})}))})),Noty.button("Cancel","btn btn-outline-secondary",(function(){n.close()}))]})},deleteMultiplePosts:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=this;t=[],window.checkedList=window.checkedList?window.checkedList:[],window.checkedList.forEach((function(e){return t.push(e.value)}));e=this;var n=notyDialog({text:"Are you sure you want to delete the selected post(s)?",buttons:[Noty.button("Yes, Delete","btn btn-danger",(function(){t.forEach((function(o,s){axios.delete("/api/remotePosts/"+o).then((function(o){n.close(),s>=t.length-1&&(e.getRemotePosts(),notyMsg({text:"The selected posts was deleted successfully!",type:"success"}))})).catch((function(t){notyMsg({text:"Something went wrong! we could not delete a post.",type:"error"})}))}))})),Noty.button("Cancel","btn btn-outline-secondary",(function(){n.close()}))]})},dtFormat:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return window.dtFormat(t,e,n)}},mounted:function(){setTimeout((function(){$('[data-toggle="tooltip"]').tooltip()}),1e3)}};const a=(0,n(1900).Z)(i,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container-fluid",class:{loading:t.loading}},[n("div",{staticClass:"row justify-content-center"},[n("div",{staticClass:"col-12 col-lg-10"},[t._m(0),t._v(" "),t.msg.success?n("div",{staticClass:"alert alert-success mb-4"},[t._v(" "+t._s(t.msg.success)+" ")]):t._e(),t._v(" "),t._l(t.msg.warnings,(function(e){return n("div",{key:e,staticClass:"alert alert-warning mb-4",domProps:{innerHTML:t._s(e)}})})),t._v(" "),t._l(t.msg.errors,(function(e){return n("div",{key:e,staticClass:"alert alert-danger mb-4",attrs:{role:"alert"}},[t._v(" "+t._s(e)+" ")])})),t._v(" "),t._l(t.msg.infos,(function(e){return n("div",{key:e,domProps:{innerHTML:t._s(e)}})})),t._v(" "),n("section",[n("div",{staticClass:"row"},[n("div",{staticClass:"col-auto"},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedChannel,expression:"selectedChannel"}],staticClass:"form-select",attrs:{name:"channels",id:"channels"},on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.selectedChannel=e.target.multiple?n:n[0]},function(e){return t.getInsights()}]}},t._l(t.channels,(function(e,o){return n("option",{key:o,domProps:{value:e.id}},[t._v(t._s(e.title)+" ("+t._s(e.type?e.type.split("-")[0]:e.type)+")")])})),0)]),t._v(" "),n("div",{staticClass:"col-auto"},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.period,expression:"period"}],staticClass:"form-select",attrs:{name:"days",id:"days"},on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.period=e.target.multiple?n:n[0]},function(e){return t.getInsights()}]}},[n("option",{attrs:{value:"30DAYS",selected:""}},[t._v("30 Days")]),t._v(" "),n("option",{attrs:{value:"14DAYS"}},[t._v("14 Days")]),t._v(" "),n("option",{attrs:{value:"7DAYS"}},[t._v("7 Days")])])])])]),t._v(" "),t._l(t.msg.footercontent,(function(e,o){return n("div",{key:o,staticClass:"mt-7",domProps:{innerHTML:t._s(e)}})}))],2)])])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"header"},[n("div",{staticClass:"header-body"},[n("h6",{staticClass:"header-pretitle"},[t._v(" Content ")]),t._v(" "),n("h1",{staticClass:"header-title"},[t._v(" Insights ")])])])}],!1,null,null,null).exports}}]);