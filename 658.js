"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[658],{2658:(t,s,a)=>{a.r(s),a.d(s,{default:()=>l});function e(t,s){return function(t){if(Array.isArray(t))return t}(t)||function(t,s){var a=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==a)return;var e,i,n=[],l=!0,r=!1;try{for(a=a.call(t);!(l=(e=a.next()).done)&&(n.push(e.value),!s||n.length!==s);l=!0);}catch(t){r=!0,i=t}finally{try{l||null==a.return||a.return()}finally{if(r)throw i}}return n}(t,s)||function(t,s){if(!t)return;if("string"==typeof t)return i(t,s);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return i(t,s)}(t,s)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,s){(null==s||s>t.length)&&(s=t.length);for(var a=0,e=new Array(s);a<s;a++)e[a]=t[a];return e}const n={data:function(){return{loading:!1,reload:!0,msg:{errors:window.nerrors,success:window.nsuccess,warnings:window.nwarnings,infos:window.ninfos,footercontent:window.nfooterContent},user:window.nuelinkUser,statics:{},users:[],pagination:{limit:50}}},created:function(){document.title="Nuelink - Users",this.getUsers(!1),this.getStatics()},computed:{},methods:{searchPages:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];$(".tooltip").remove(),t?(this.pagination.search=null,this.getUsers(!1)):document.querySelector("#searchUsers").value&&document.querySelector("#searchUsers").value.length>2?(this.pagination.search=document.querySelector("#searchUsers").value,this.getUsers(!1)):notyMsg({text:"the search query should be greater than two characters",type:"warning"})},paginationUrl:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(t){var s=new URL(t),a=s&&s.searchParams.get("page")?s.searchParams.get("page"):1,e=new URL(window.location.href);return e.searchParams.set("page",a),e.href}},changePerPage:function(t){this.pagination.limit=parseInt(t.target.value),this.getUsers(!1)},deleteUser:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=this,a=notyDialog({text:'<h3>Are you sure you want to delete this User?</h3>\n         <div class="mt-3"><label>Please type <b class="text-dark">'.concat(t.name,'</b> to confirm.</label> <input type="text" placeholder="').concat(t.name,'" class="form-control" data-name="').concat(t.name,'" id="confirmDelete"> </div>'),buttons:[Noty.button("Yes, Delete User","btn btn-danger deleteUser disabled",(function(){axios.delete("/api/admin/clients/"+t.id).then((function(t){s.getUsers(!1),a.close(),notyMsg({text:"User was deleted successfully!",type:"success"})})).catch((function(t){notyMsg({text:"Something went wrong! We could not delete this User. Please try again.",type:"error"}),a.close()}))})),Noty.button("Cancel","btn btn-outline-secondary",(function(){a.close()}))]})},getStatics:function(){var t=this;axios.get("/api/admin/status").then((function(s){t.statics=s.data})).catch((function(s){t.getStatics()}))},getUsers:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=this,i="/api/admin/clients";if(s&&s.length>0)i="/api/admin/search?search="+s;else if(t)i+="?".concat(a.pagination.limit?"limit="+a.pagination.limit:"").concat(a.pagination.search?"&q="+a.pagination.search:"");else{var n=new URL(window.location.href),l=n&&n.searchParams.get("page")?n.searchParams.get("page"):1;i="".concat(i,"?page=").concat(l).concat(a.pagination.limit?"&limit="+a.pagination.limit:"").concat(a.pagination.search&&a.pagination.search.length>2?"&q="+a.pagination.search:"")}a.pagination.endpoint=i,a.reload=!1,a.loading=!0,axios.get(i).then((function(t){a.users=t.data.data;for(var s=0,i=Object.entries(t.data.meta);s<i.length;s++){var n=e(i[s],2),l=n[0],r=n[1];a.pagination[l]=r}a.loading=!0;try{setTimeout((function(){$('[data-toggle="tooltip"]').tooltip()}),400)}catch(t){try{setTimeout((function(){$('[data-toggle="tooltip"]').tooltip()}),1200)}catch(t){}}a.reload=!0,setTimeout((function(){a.loading=!1,initList(),a.pagination.search&&a.pagination.search.length>2&&document.querySelector("#searchUsers")&&(document.querySelector("#searchUsers").value=a.pagination.search),$(".tooltip").remove()}),300)})).catch((function(t){a.reload=!0,a.loading=!1}))},dtFormat:function(t){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return window.dtFormat(t,s,a)}},mounted:function(){$(document).on("input","#confirmDelete",(function(t){this.value==this.getAttribute("data-name")?document.querySelector(".deleteUser").classList.remove("disabled"):document.querySelector(".deleteUser").classList.add("disabled")}))}};const l=(0,a(1900).Z)(n,(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"container-fluid",class:{loading:t.loading}},[a("div",{staticClass:"row justify-content-center"},[a("div",{staticClass:"col-12"},[t._m(0),t._v(" "),t.msg.success?a("div",{staticClass:"alert alert-success mb-4"},[t._v(" "+t._s(t.msg.success)+" ")]):t._e(),t._v(" "),t._l(t.msg.warnings,(function(s){return a("div",{key:s,staticClass:"alert alert-warning mb-4",domProps:{innerHTML:t._s(s)}})})),t._v(" "),t._l(t.msg.errors,(function(s){return a("div",{key:s,staticClass:"alert alert-danger mb-4",attrs:{role:"alert"}},[t._v(" "+t._s(s)+" ")])})),t._v(" "),t._l(t.msg.infos,(function(s){return a("div",{key:s,domProps:{innerHTML:t._s(s)}})})),t._v(" "),a("div",{staticClass:"row row-sm"},[a("div",{staticClass:"col-md"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-body"},[a("h6",{staticClass:"text-uppercase text-muted mb-2"},[t._v(" Users ")]),t._v(" "),a("span",{staticClass:"h2 mb-0"},[t._v(t._s(t.statics.usersCount||0))]),t._v(" "),t.statics.activeUsersCount?a("small",{staticClass:"text-muted"},[t._v(t._s(t.statics.activeUsersCount?t.statics.activeUsersCount:t.statics.usersCount)+" Active")]):t._e()])])]),t._v(" "),a("div",{staticClass:"col-md"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-body"},[a("h6",{staticClass:"text-uppercase text-muted mb-2"},[t._v("Channels")]),t._v(" "),a("span",{staticClass:"h2 mb-0"},[t._v(t._s(t.statics.channelsCount||0))])])])]),t._v(" "),a("div",{staticClass:"col-md"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-body"},[a("h6",{staticClass:"text-uppercase text-muted mb-2"},[t._v("Collections")]),t._v(" "),a("span",{staticClass:"h2 mb-0"},[t._v(t._s(t.statics.collectionsCount||0))])])])]),t._v(" "),a("div",{staticClass:"col-md"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-body"},[a("h6",{staticClass:"text-uppercase text-muted mb-2"},[t._v(" Automations ")]),t._v(" "),a("span",{staticClass:"h2 mb-0"},[t._v(t._s(t.statics.automationsCount||0))])])])]),t._v(" "),a("div",{staticClass:"col-md"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-body"},[a("h6",{staticClass:"text-uppercase text-muted mb-2"},[t._v(" Posts ")]),t._v(" "),a("span",{staticClass:"h2 mb-0"},[t._v(t._s(t.statics.postsCount||0))])])])])]),t._v(" "),t.reload?a("div",{staticClass:"card",attrs:{"data-list":'{"valueNames": ["item-name", "item-email", "item-added", "item-loggedin", "item-plan", "item-status", "item-channels", "item-collections", "item-automations", "item-posts", "item-logcount"], "page": '+(t.pagination.limit||50)+', "pagination": {"paginationClass": "list-pagination"} }',id:"users"}},[a("div",{staticClass:"card-header"},[a("div",{staticClass:"row align-items-center"},[t._m(1),t._v(" "),t.pagination&&t.pagination.search&&t.pagination.search.length>2?a("div",{staticClass:"col-auto me-n3"},[a("span",{staticClass:"align-middle fs-5 me-2"},[t._v("You searched for "),a("b",[t._v(t._s(t.pagination.search))]),t._v(" ("+t._s(t.pagination.total+" results")+")")]),t._v(" "),a("button",{staticClass:"btn btn-sm btn-outline-warning py-0",on:{click:function(s){return t.searchPages(!0)}}},[t._v("Cancel Search")])]):t._e(),t._v(" "),t.pagination&&t.pagination.limit&&t.pagination.total>t.pagination.limit||t.pagination.search&&t.pagination.search.length>2?a("div",{staticClass:"col-auto me-n3"},[a("button",{staticClass:"btn btn-sm btn-white py-0",attrs:{"data-toggle":"tooltip",title:"Search on all pages"},on:{click:function(s){return t.searchPages()}}},[t._v("Search")])]):t._e(),t._v(" "),t.pagination&&t.pagination.limit&&t.pagination.total?a("div",{staticClass:"col-auto me-n3"},[a("form",{staticClass:"mb-0"},[a("select",{staticClass:"form-select form-select-sm form-control-flush list-page",attrs:{"data-choices":'{"searchEnabled": false}'},on:{change:function(s){return t.changePerPage(s)}}},[a("option",{attrs:{value:"25"},domProps:{selected:25==parseInt(t.pagination.limit)}},[t._v("25 per page")]),t._v(" "),a("option",{attrs:{value:"50"},domProps:{selected:50==parseInt(t.pagination.limit)}},[t._v("50 per page")]),t._v(" "),t._l(parseInt(t.pagination.total/100+(t.pagination.total%100>0?1:0)),(function(s){return a("option",{directives:[{name:"show",rawName:"v-show",value:100*s<200,expression:"(page*100) < 200"}],key:s,domProps:{value:100*s,selected:parseInt(t.pagination.limit)==100*s}},[t._v(t._s(100*s)+" per page")])}))],2)])]):t._e(),t._v(" "),t._m(2)])]),t._v(" "),a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-sm table-hover table-nowrap card-table"},[t.users&&t.users.length>0?a("thead",[t._m(3)]):t._e(),t._v(" "),a("tbody",{staticClass:"list fs-base"},[!t.users||t.users&&t.users.length<1?a("tr",[a("td",{staticClass:"fs-2 text-center text-muted"},[t._v("All users will appear here.")])]):t._e(),t._v(" "),t._l(t.users,(function(s,e){return a("tr",{key:e},[t._m(4,!0),t._v(" "),a("td",[a("span",{staticClass:"item-email",staticStyle:{display:"none"},attrs:{hidden:""}},[t._v(t._s(s.email))]),t._v(" "),a("div",{staticClass:"avatar avatar-xs align-middle me-2"},[a("img",{staticClass:"avatar-img rounded-circle",attrs:{src:s.profilePicture?"/"+s.profilePicture:"",alt:"user photo",onerror:"this.onerror=null;this.src='/img/image-not-found.jpg';"}})]),t._v(" "),a("a",{staticClass:"item-name text-reset",attrs:{"data-toggle":"tooltip",title:s.email?s.email:null,href:s.email?"mailto:"+s.email:null}},[t._v(t._s(s.name?s.name:"-"))]),t._v("\n                                    "),a("a",{attrs:{href:"/api/admin/impersonation/"+s.id,"data-toggle":"tooltip",title:"Impersonate"}},[a("i",{staticClass:"fe fe-mask fe fe-log-in"})]),t._v(" "),s.permissions&&-1!=s.permissions.indexOf("admin")||s.id==t.user.id?a("span",{staticClass:"badge bg-warning fs-6 ms-1"},[t._v("Admin")]):t._e()]),t._v(" "),a("td",[a("time",{staticClass:"item-added",attrs:{datetime:s.createdAt?s.createdAt:""}},[t._v(t._s(s.createdAt?t.dtFormat(s.createdAt,"d"):"-"))])]),t._v(" "),a("td",[s.lastLogin?a("time",{staticClass:"item-loggedin",attrs:{datetime:s.lastLogin?s.lastLogin:""}},[t._v(t._s(s.lastLogin?t.dtFormat(s.lastLogin,"d"):"-"))]):t._e(),t._v(" "),s.lastLogin?a("span",{staticClass:"text-muted small"},[t._v(t._s(t.dtFormat(s.lastLogin,"txs")))]):a("span",[t._v("   -")])]),t._v(" "),a("td",[a("span",{staticClass:"item-logcount badge bg-primary"},[t._v(t._s(s.loginCounts?s.loginCounts:0))])]),t._v(" "),a("td",[a("span",{staticClass:"item-plan badge bg-primary"},[t._v(t._s(s.plan?s.plan:"There is no plan"))])]),t._v(" "),a("td",[a("span",{staticClass:"item-status badge bg-success"},[t._v(t._s((s.isActive,"Active")))])]),t._v(" "),a("td",[a("span",{staticClass:"item-channels"},[t._v(t._s(s.channels?s.channels:"0"))])]),t._v(" "),a("td",[a("span",{staticClass:"item-collections"},[t._v(t._s(s.collections?s.collections:"0"))])]),t._v(" "),a("td",[a("span",{staticClass:"item-automations"},[t._v(t._s(s.automations?s.automations:"0"))])]),t._v(" "),a("td",[a("span",{staticClass:"item-posts"},[t._v(t._s(s.posts?s.posts:"0"))])]),t._v(" "),a("td",{staticClass:"text-end"},[a("div",{staticClass:"dropdown"},[t._m(5,!0),t._v(" "),a("div",{staticClass:"dropdown-menu dropdown-menu-end dropdown-fix"},[a("a",{staticClass:"dropdown-item",attrs:{href:s.email?"mailto:"+s.email:null}},[t._v(" Send Email ")]),t._v(" "),a("a",{staticClass:"dropdown-item",attrs:{href:"/api/admin/impersonation/"+s.id}},[t._v(" Impersonate ")]),t._v(" "),a("a",{staticClass:"disabled dropdown-item",attrs:{href:"#"}},[t._v(" Edit ")]),t._v(" "),a("button",{staticClass:"dropdown-item",attrs:{disabled:"FREE"!=s.plan},on:{click:function(a){return t.deleteUser(s)}}},[t._v(" Delete ")])])])])])}))],2)])]),t._v(" "),t.users&&t.users.length>0?a("div",{staticClass:"card-footer d-flex justify-content-center"},[t.pagination&&t.users&&t.pagination.total>t.pagination.limit?a("nav",{attrs:{"aria-label":"navigation"}},[a("ul",{staticClass:"pagination"},t._l(t.pagination.links,(function(s,e){return a("li",{key:e,staticClass:"page-item",class:s.active?"active":""},[a("a",{staticClass:"page-link",class:!s.url||s.active?"disabled opacity-50":"",attrs:{href:t.paginationUrl(s.url)},domProps:{innerHTML:t._s(s.page||s.label||e+1)}})])})),0)]):t._e(),t._v(" "),a("ul",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"list-pagination pagination pagination-tabs card-pagination"}),t._v(" "),t._m(6)]):t._e()]):t._e(),t._v(" "),t._l(t.msg.footercontent,(function(s,e){return a("div",{key:e,staticClass:"mt-7",domProps:{innerHTML:t._s(s)}})}))],2)])])}),[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"header"},[a("div",{staticClass:"header-body"},[a("div",{staticClass:"row align-items-center"},[a("div",{staticClass:"col"},[a("h6",{staticClass:"header-pretitle"},[t._v("\n                              Admin\n                          ")]),t._v(" "),a("h1",{staticClass:"header-title"},[t._v("\n                              Users\n                          ")])]),t._v(" "),a("div",{staticClass:"col-auto"})])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"col"},[a("div",{staticClass:"mb-0"},[a("div",{staticClass:"input-group input-group-flush input-group-merge input-group-reverse"},[a("input",{staticClass:"form-control list-search",attrs:{type:"search",id:"searchUsers",placeholder:"Search"}}),t._v(" "),a("span",{staticClass:"input-group-text"},[a("i",{staticClass:"fe fe-search"})])])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"col-auto",attrs:{hidden:""}},[a("div",{staticClass:"dropdown"},[a("button",{staticClass:"btn btn-sm btn-white",attrs:{type:"button","data-bs-toggle":"dropdown","data-bs-auto-close":"outside","aria-haspopup":"true","aria-expanded":"false"}},[a("i",{staticClass:"fe fe-sliders me-1"}),t._v(" Filter "),a("span",{staticClass:"badge bg-primary ms-1 list-filter-number"})]),t._v(" "),a("form",{staticClass:"dropdown-menu dropdown-menu-end dropdown-menu-card"},[a("div",{staticClass:"card-header"},[a("h4",{staticClass:"card-header-title"},[t._v("\n                                        Filters\n                                      ")]),t._v(" "),a("button",{staticClass:"btn btn-sm btn-link text-reset",attrs:{type:"reset"}},[a("small",[t._v("Clear filters")])])]),t._v(" "),a("div",{staticClass:"card-body"},[a("div",{staticClass:"list-group list-group-flush mt-n4 mb-4"},[a("div",{staticClass:"list-group-item"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("small",[t._v("Plan")])]),t._v(" "),a("div",{staticClass:"col-auto"},[a("select",{staticClass:"form-select form-select-sm",attrs:{"data-filter":"item-plan","data-choices":'{"searchEnabled": false}'}},[a("option",{attrs:{value:"*",selected:""}},[t._v("Any")]),t._v(" "),a("option",{attrs:{value:"FREE"}},[t._v("Free")]),t._v(" "),a("option",{attrs:{value:"STANDARD"}},[t._v("Standard")]),t._v(" "),a("option",{attrs:{value:"PREMIUM"}},[t._v("Premium")])])])])]),t._v(" "),a("div",{staticClass:"list-group-item"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("small",[t._v("Status")])]),t._v(" "),a("div",{staticClass:"col-auto"},[a("select",{staticClass:"form-select form-select-sm",attrs:{"data-filter":"item-status","data-choices":'{"searchEnabled": false}'}},[a("option",{attrs:{value:"*",selected:""}},[t._v("Any")]),t._v(" "),a("option",{attrs:{value:"Active"}},[t._v("Active")]),t._v(" "),a("option",{attrs:{value:"Inactive"}},[t._v("Inactive")])])])])])]),t._v(" "),a("button",{staticClass:"btn w-100 btn-primary list-filter-submit",attrs:{type:"button"}},[t._v("\n                                          Apply filter\n                                      ")])])])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("tr",[a("th",[a("div",{staticClass:"form-check mb-n2"},[a("input",{staticClass:"form-check-input list-checkbox-all",attrs:{id:"listCheckboxAll",type:"checkbox"}}),t._v(" "),a("label",{staticClass:"form-check-label",attrs:{for:"listCheckboxAll"}})])]),t._v(" "),a("th",[a("a",{staticClass:"list-sort text-muted",attrs:{"data-sort":"item-name",href:"#"}},[t._v("Name")])]),t._v(" "),a("th",[a("a",{staticClass:"list-sort text-muted",attrs:{"data-sort":"item-added",href:"#"}},[t._v("Added")])]),t._v(" "),a("th",[a("a",{staticClass:"list-sort text-muted",attrs:{"data-sort":"item-loggedin",href:"#"}},[t._v("Last Logged In")])]),t._v(" "),a("th",[a("a",{staticClass:"list-sort text-muted",attrs:{"data-sort":"item-logcount",href:"#"}},[t._v("Logs Count")])]),t._v(" "),a("th",[a("a",{staticClass:"list-sort text-muted",attrs:{"data-sort":"item-plan",href:"#"}},[t._v("Plan")])]),t._v(" "),a("th",[a("a",{staticClass:"list-sort text-muted",attrs:{"data-sort":"item-status",href:"#"}},[t._v("Status")])]),t._v(" "),a("th",[a("a",{staticClass:"list-sort text-muted",attrs:{"data-sort":"item-channels",href:"#"}},[t._v("Channels")])]),t._v(" "),a("th",[a("a",{staticClass:"list-sort text-muted",attrs:{"data-sort":"item-collections",href:"#"}},[t._v("Collections")])]),t._v(" "),a("th",[a("a",{staticClass:"list-sort text-muted",attrs:{"data-sort":"item-automations",href:"#"}},[t._v("Automations")])]),t._v(" "),a("th",{attrs:{colspan:"2"}},[a("a",{staticClass:"list-sort text-muted",attrs:{"data-sort":"item-posts",href:"#"}},[t._v("Posts")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("td",[a("div",{staticClass:"form-check"},[a("input",{staticClass:"form-check-input list-checkbox",attrs:{id:"listCheckboxOne",type:"checkbox"}}),t._v(" "),a("label",{staticClass:"form-check-label",attrs:{for:"listCheckboxOne"}})])])},function(){var t=this.$createElement,s=this._self._c||t;return s("a",{staticClass:"dropdown-ellipses dropdown-toggle",attrs:{href:"#",role:"button","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[s("i",{staticClass:"fe fe-more-vertical"})])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"list-alert alert alert-dark alert-dismissible border fade",attrs:{role:"alert"}},[a("div",{staticClass:"row align-items-center"},[a("div",{staticClass:"col"},[a("div",{staticClass:"form-check"},[a("input",{staticClass:"form-check-input",attrs:{id:"listAlertCheckbox",type:"checkbox",checked:"",disabled:""}}),t._v(" "),a("label",{staticClass:"form-check-label text-white",attrs:{for:"listAlertCheckbox"}},[a("span",{staticClass:"list-alert-count"},[t._v("0")]),t._v(" users(s)\n                                  ")])])]),t._v(" "),a("div",{staticClass:"col-auto me-n3"},[a("button",{staticClass:"btn btn-sm btn-white-20",attrs:{disabled:""}},[t._v(" Activate ")]),t._v(" "),a("button",{staticClass:"btn btn-sm btn-white-20",attrs:{disabled:""}},[t._v(" Deactivate ")])])]),t._v(" "),a("button",{staticClass:"list-alert-close btn-close",attrs:{type:"button","aria-label":"Close"}})])}],!1,null,null,null).exports}}]);