"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[824],{2824:(t,e,a)=>{a.r(e),a.d(e,{default:()=>i});function s(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var a=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==a)return;var s,r,o=[],i=!0,n=!1;try{for(a=a.call(t);!(i=(s=a.next()).done)&&(o.push(s.value),!e||o.length!==e);i=!0);}catch(t){n=!0,r=t}finally{try{i||null==a.return||a.return()}finally{if(n)throw r}}return o}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return r(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,s=new Array(e);a<e;a++)s[a]=t[a];return s}const o={data:function(){return{loading:!1,msg:{errors:window.nerrors,success:window.nsuccess,warnings:window.nwarnings,infos:window.ninfos,footercontent:window.nfooterContent},reload:!0,user:window.nuelinkUser,categories:[],category:{plans:[]},collection:{categoryId:0,selectedPlans:[],publishes:1,pDays:[],pTimes:[],status:!1},collections:[],plans:[],daysList:[{text:"Monday"},{text:"Tuesday"},{text:"Wednesday"},{text:"Thursday"},{text:"Friday"},{text:"Saturday"},{text:"Sunday"}],hoursList:[],libraries:[],templates:[]}},created:function(){document.title="Nuelink - Library Admin";for(var t=0;t<24;t++){var e=t<1?"00:00":t<10?"0"+t+":00":t+":00",a=t<1?"12:00 AM":12==t?"12:00 PM (Noon)":t<12?t+":00 AM":t-12+":00 PM";this.hoursList.push({text:a,value:e}),this.hoursList.push({text:a.replace(":00",":30").replace(" (Noon)",""),value:e.replace(":00",":30")})}this.getCategories(),this.getLibraries(),this.getPlans()},computed:{validateCategory:function(){return!(this.category.name&&this.category.description)}},methods:{reloadCategoryFields:function(){this.category={plans:[]}},createCategory:function(){var t=this;this.category.color=this.category.statusB?"PUBLISHED":"DRAFT",this.loading=!0,axios.post("/api/admin/library/category",t.category).then((function(e){t.reloadCategoryFields(),t.getCategories(),$(".modal").modal("hide"),t.loading=!1})).catch((function(e){t.loading=!1}))},getCategories:function(){var t=this;axios.get("/api/admin/library/category").then((function(e){t.categories=e.data.data})).catch((function(e){t.getCategories()}))},deleteCategory:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this,a=notyDialog({text:"Are you sure you want to delete this category?",buttons:[Noty.button("Yes, Delete","btn btn-danger",(function(){axios.delete("/api/admin/library/category/"+t).then((function(t){e.getCategories(),a.close(),notyMsg({text:"Category was deleted successfully!",type:"success"})})).catch((function(t){notyMsg({text:t&&t.response&&t.response.data&&t.response.data.error?t.response.data.error:"Something went wrong! We could not delete the category. Please try again.",type:"error"}),a.close()}))})),Noty.button("Cancel","btn btn-outline-secondary",(function(){a.close()}))]})},openEditCategory:function(t){this.category={statusB:!1};for(var e=0,a=Object.entries(t);e<a.length;e++){var r=s(a[e],2),o=r[0],i=r[1];"categoryLibraries"!=o&&(this.category[o]=i)}this.category.statusB="PUBLISHED"==this.category.color},editCategory:function(){var t=this;this.loading=!0,this.category.color=this.category.statusB?"PUBLISHED":"DRAFT",axios.put("/api/admin/library/category/"+this.category.id,this.category).then((function(e){t.reloadCategoryFields(),t.getCategories(),$(".modal").modal("hide"),t.loading=!1,notyMsg({text:"Category was updated successfully",type:"success"})})).catch((function(e){t.loading=!1,notyMsg({text:"Something went wrong! we could not update this post",type:"error"})}))},getPlans:function(){var t=this;axios.get("/api/plans").then((function(e){t.plans=e.data.data})).catch((function(e){t.getplans()}))},getLibraries:function(){var t=this;axios.get("/api/admin/library").then((function(e){t.libraries=e.data.data.map((function(t){return t.categoryId}))})).catch((function(e){t.getLibraries()}))},libraryLength:function(t){return this.libraries.filter((function(e){return e===t})).length||0}},mounted:function(){$(document).on("show.bs.modal","#modalAdminCreateCategories",(function(){}))}};const i=(0,a(1900).Z)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid",class:{loading:t.loading}},[a("div",{staticClass:"row justify-content-center"},[a("div",{staticClass:"col-12"},[t._m(0),t._v(" "),t.msg.success?a("div",{staticClass:"alert alert-success mb-4"},[t._v(" "+t._s(t.msg.success)+" ")]):t._e(),t._v(" "),t._l(t.msg.warnings,(function(e){return a("div",{key:e,staticClass:"alert alert-warning mb-4",domProps:{innerHTML:t._s(e)}})})),t._v(" "),t._l(t.msg.errors,(function(e){return a("div",{key:e,staticClass:"alert alert-danger mb-4",attrs:{role:"alert"}},[t._v(" "+t._s(e)+" ")])})),t._v(" "),t._l(t.msg.infos,(function(e){return a("div",{key:e,domProps:{innerHTML:t._s(e)}})})),t._v(" "),a("div",{staticClass:"mb-3 text-right"},[a("router-link",{attrs:{to:"/admin/library"}},[t._v("Go to Library")])],1),t._v(" "),!t.categories||t.categories&&t.categories.length<1?a("p",{staticClass:"card card-body lead text-center text-muted"},[t._v("Categories will appear here.")]):a("div",{staticClass:"row"},t._l(t.categories,(function(e,s){return a("div",{key:s+e.id,staticClass:"col-lg-6 col-xl-4"},[a("div",{staticClass:"card card-body pb-0"},[a("h3",{staticClass:"row row-sm mb-2"},[a("div",{staticClass:"col"},[a("i",{class:"fe fe-zap "+(e&&e.id?"":"text-danger")}),t._v(" "),a("a",{staticClass:"text-black",attrs:{href:"#!","data-bs-toggle":"modal","data-bs-target":"#modalAdminEditCategories"},on:{click:function(a){return t.openEditCategory(e)}}},[t._v(t._s(e&&e.name?e.name:""))]),t._v(" "),e&&e.id?t._e():a("span",{staticClass:"badge bg-danger-soft ms-2"},[t._v("Collection(s) without category")]),t._v(" "),a("span",{staticClass:"badge bg-secondary-soft fs-sm ms-2"},[t._v(t._s(e&&"PUBLISHED"==e.color.toUpperCase()?"":"DRAFT"))])]),t._v(" "),e&&e.id?a("div",{staticClass:"col-auto"},[a("div",{staticClass:"dropdown"},[t._m(1,!0),t._v(" "),a("div",{staticClass:"dropdown-menu dropdown-menu-end"},[a("a",{staticClass:"dropdown-item",attrs:{href:"#!","data-bs-toggle":"modal","data-bs-target":"#modalAdminEditCategories"},on:{click:function(a){return t.openEditCategory(e)}}},[t._v(" Edit Category ")]),t._v(" "),a("a",{staticClass:"dropdown-item",attrs:{href:"#!"},on:{click:function(a){return t.deleteCategory(e.id)}}},[t._v("  Delete Category ")])])])]):t._e()]),t._v(" "),a("p",{staticClass:"text-muted mb-2"},[t._v(t._s(e.description))]),t._v(" "),a("p",[a("i",{staticClass:"fe fe-layers"}),t._v("  "+t._s(t.libraryLength(e.id)>1?t.libraryLength(e.id)+" Collections":t.libraryLength(e.id)+" Collection"))])])])})),0),t._v(" "),t._l(t.msg.footercontent,(function(e,s){return a("div",{key:s,staticClass:"mt-7",domProps:{innerHTML:t._s(e)}})}))],2)]),t._v(" "),a("div",{staticClass:"modal fade",attrs:{id:"modalAdminCreateCategories",tabindex:"-1",role:"dialog","aria-hidden":"true","data-bs-backdrop":"static","data-bs-keyboard":"false"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content bg-lighter"},[a("div",{staticClass:"card-header"},[a("h3",{staticClass:"card-header-title"},[t._v("\n                        Create Category\n                    ")]),t._v(" "),a("button",{staticClass:"btn-close",attrs:{type:"button","data-bs-dismiss":"modal","aria-label":"Close"},on:{click:t.reloadCategoryFields}})]),t._v(" "),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"categoryName"}},[t._v("Category Name")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.category.name,expression:"category.name"}],staticClass:"form-control",attrs:{type:"text",id:"categoryName","aria-describedby":"categoryName",placeholder:"Enter a name for your category"},domProps:{value:t.category.name},on:{input:function(e){e.target.composing||t.$set(t.category,"name",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"categoryName"}},[t._v("Category Description ")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.category.description,expression:"category.description"}],staticClass:"form-control",attrs:{type:"text",id:"categoryDesc","aria-describedby":"categoryDesc",placeholder:"Enter a short description name for your category"},domProps:{value:t.category.description},on:{input:function(e){e.target.composing||t.$set(t.category,"description",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-check form-switch"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.category.statusB,expression:"category.statusB"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"categoryDraft"},domProps:{checked:Array.isArray(t.category.statusB)?t._i(t.category.statusB,null)>-1:t.category.statusB},on:{change:function(e){var a=t.category.statusB,s=e.target,r=!!s.checked;if(Array.isArray(a)){var o=t._i(a,null);s.checked?o<0&&t.$set(t.category,"statusB",a.concat([null])):o>-1&&t.$set(t.category,"statusB",a.slice(0,o).concat(a.slice(o+1)))}else t.$set(t.category,"statusB",r)}}}),t._v(" "),a("label",{staticClass:"form-check-label",attrs:{for:"categoryDraft"}},[t._v(" Publish this category to all users")])])]),t._v(" "),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button",disabled:t.validateCategory},on:{click:t.createCategory}},[t._v("Create Category")]),t._v(" "),a("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-bs-dismiss":"modal"},on:{click:t.reloadCategoryFields}},[t._v("Close")])])])])]),t._v(" "),a("div",{staticClass:"modal fade",attrs:{id:"modalAdminEditCategories",tabindex:"-1",role:"dialog","aria-hidden":"true","data-bs-backdrop":"static","data-bs-keyboard":"false"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content bg-lighter"},[a("div",{staticClass:"card-header"},[a("h3",{staticClass:"card-header-title"},[t._v(" Edit Category ")]),t._v(" "),a("button",{staticClass:"btn-close",attrs:{type:"button","data-bs-dismiss":"modal","aria-label":"Close"},on:{click:t.reloadCategoryFields}})]),t._v(" "),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"categoryName"}},[t._v("Category Name")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.category.name,expression:"category.name"}],staticClass:"form-control",attrs:{type:"text",id:"categoryName","aria-describedby":"categoryName",placeholder:"Enter a name for your category"},domProps:{value:t.category.name},on:{input:function(e){e.target.composing||t.$set(t.category,"name",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"categoryName"}},[t._v("Category Description ")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.category.description,expression:"category.description"}],staticClass:"form-control",attrs:{type:"text",id:"categoryDescEdit","aria-describedby":"categoryDescEdit",placeholder:"Enter a short description name for your category"},domProps:{value:t.category.description},on:{input:function(e){e.target.composing||t.$set(t.category,"description",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-check form-switch"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.category.statusB,expression:"category.statusB"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"categoryDraft"},domProps:{checked:Array.isArray(t.category.statusB)?t._i(t.category.statusB,null)>-1:t.category.statusB},on:{change:function(e){var a=t.category.statusB,s=e.target,r=!!s.checked;if(Array.isArray(a)){var o=t._i(a,null);s.checked?o<0&&t.$set(t.category,"statusB",a.concat([null])):o>-1&&t.$set(t.category,"statusB",a.slice(0,o).concat(a.slice(o+1)))}else t.$set(t.category,"statusB",r)}}}),t._v(" "),a("label",{staticClass:"form-check-label",attrs:{for:"categoryDraft"}},[t._v(" Publish this category to all users")])])]),t._v(" "),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button",disabled:!1},on:{click:t.editCategory}},[t._v("Update Category")]),t._v(" "),a("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-bs-dismiss":"modal"},on:{click:t.reloadCategoryFields}},[t._v("Close")])])])])])])}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"header"},[a("div",{staticClass:"header-body"},[a("div",{staticClass:"row align-items-center"},[a("div",{staticClass:"col"},[a("h6",{staticClass:"header-pretitle"},[t._v(" Setup ")]),t._v(" "),a("h1",{staticClass:"header-title"},[t._v(" Categories ")])]),t._v(" "),a("div",{staticClass:"col-auto"},[a("a",{staticClass:"btn btn-primary",attrs:{href:"#","data-bs-toggle":"modal","data-bs-target":"#modalAdminCreateCategories"}},[t._v(" Create Category\n                            ")])])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("a",{staticClass:"dropdown-ellipses dropdown-toggle",attrs:{href:"#",role:"button","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[e("i",{staticClass:"fe fe-more-vertical"})])}],!1,null,null,null).exports}}]);